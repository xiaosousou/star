window.__require=function t(e,i,o){function n(a,r){if(!i[a]){if(!e[a]){var h=a.split("/");if(h=h[h.length-1],!e[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+a+"'")}}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({"Weapon fragments":[function(t,e,i){"use strict";cc._RF.push(e,"2f093ZlTllLyrmfA4rApgll","Weapon fragments"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],bossbullet:[function(t,e,i){"use strict";cc._RF.push(e,"4b281hcHMtOR7P+eLVRR6u0","bossbullet"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.xl=cc.v2(Math.cos(t*Math.PI/180),Math.sin(t*Math.PI/180)),this.node.rotation=-Math.atan2(this.xl.y,this.xl.x)/Math.PI*180},onCollisionEnter:function(t,e){"player"==t.node.group&&(t.node.getComponent("player").bloodNum-=10,t.node.getComponent("player").Injured(),e.node.destroy())},update:function(t){G.gameover||(Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy(),this.node.x+=200*this.xl.x*t,this.node.y+=200*this.xl.y*t)}}),cc._RF.pop()},{}],boss:[function(t,e,i){"use strict";cc._RF.push(e,"9eadcrSqNdJt4wp2tzOLqJz","boss"),cc.Class({extends:cc.Component,properties:{bullet:cc.Prefab},onLoad:function(){this.anim=this.node.getComponent(cc.Animation),this.ball=cc.find("Canvas/ball"),this.bulletnode=cc.find("Canvas/bullet"),this.bloodbar=this.node.children[0],this.bloodbar.parent=cc.find("Canvas/DownUI/bossblood"),this.bloodbar.active=!0,this.bloodbarNum=this.bloodbar.getComponent(cc.ProgressBar),this.bloodbarNum.progress=1,this.bloodnum=50,this.die=!1,this.timer=0,this.bulletangle=0,this.timer1=0},shooting:function(){this.bulletangle>=360&&(this.bulletangle=0),this.bulletangle+=5*Math.random()+5;for(var t=0;t<360;t+=20){var e=cc.instantiate(this.bullet);e.parent=this.bulletnode,e.setPosition(this.bulletnode.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.getPosition()))),e.getComponent("bossbullet").init(t+this.bulletangle)}},shooting1:function(){var t=0;this.schedule(function(){t+=2,cc.log(t);for(var e=0;e<360;e+=20){var i=cc.instantiate(this.bullet);i.parent=this.bulletnode,i.setPosition(this.bulletnode.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.getPosition()))),i.getComponent("bossbullet").init(e+t)}},.1,4,.1)},Injured:function(){this.bloodnum--,this.node.color=cc.Color.RED;var t=cc.tintTo(.3,255,255,255);this.node.runAction(t)},die1:function(){G.main.win1()},update:function(t){if(!G.gameover&&!this.die){var e=this.ball.getPosition().sub(this.node.getPosition()).normalize();this.node.y+=20*e.y*t,this.node.x+=20*e.x*t,this.bloodbarNum.progress=this.bloodnum/50,this.bloodnum<=0&&(this.die=!0,this.anim.play("bossboom"),G.gameover=!0),this.timer+=t,this.bloodbarNum.progress>.5?this.timer>=1&&(this.timer=0,this.shooting()):this.timer>=2&&(this.timer=0,this.shooting1())}}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"dd16dBUolRLTabtba5ErYel","bullet"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.xl=t,this.node.rotation=-Math.atan2(t.y,t.x)/Math.PI*180},onCollisionEnter:function(t,e){"boss"==t.node.group&&0==t.tag&&(t.node.getComponent("boss").Injured(),e.node.destroy())},update:function(t){G.gameover||(Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy(),this.node.x+=500*this.xl.x*t,this.node.y+=500*this.xl.y*t)}}),cc._RF.pop()},{}],defense:[function(t,e,i){"use strict";cc._RF.push(e,"e4865xlOfVOtIwRWyb2weZg","defense"),cc.Class({extends:cc.Component,properties:{turret:cc.Prefab},onLoad:function(){this.add100=!1,this.add50=!1,this.changeturretangle()},changeturretangle:function(){for(var t in this.node.children)this.node.children[t].getComponent("turret").changeangle(360/this.node.childrenCount*t)},update:function(t){G.gameover||(this.node.rotation>180&&(this.node.rotation=-180),this.node.rotation+=50*t)}}),cc._RF.pop()},{}],enemy:[function(t,e,i){"use strict";cc._RF.push(e,"355ecB2MhdG4ISSSuJC7l0a","enemy"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ball=cc.find("Canvas/ball"),this.anim=this.node.getComponent(cc.Animation),this.timer=0,this.die=!1},onCollisionEnter:function(t,e){"player"==t.node.group&&0==e.tag&&(t.node.getComponent("player").bloodNum-=5,t.node.getComponent("player").Injured(),this.die=!0,this.anim.play("enemyboom")),"bullet"==t.node.group&&0==e.tag&&(t.node.destroy(),this.die=!0,this.anim.play("enemyboom"))},die1:function(){this.node.destroy()},update:function(t){if(!G.gameover&&!this.die){this.timer+=t,this.timer>15&&this.node.destroy();var e=this.ball.getPosition().sub(this.node.getPosition()).normalize(),i=Math.atan2(e.y,e.x)/Math.PI*180*-1;this.node.rotation=i,this.node.y+=50*e.y*t,this.node.x+=50*e.x*t}}}),cc._RF.pop()},{}],main:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","main"),window.G={main:null,gameover:!1,score:0},cc.Class({extends:cc.Component,properties:{ball:cc.Node,weapon:cc.Prefab,enemy:cc.Prefab,boss:cc.Prefab},onLoad:function(){cc.director.getCollisionManager().enabled=!0,G.main=this,G.gameover=!0,G.score=0,this.enemynode=cc.find("Canvas/enemys"),this.bossnode=cc.find("Canvas/boss"),this.gameovernode=cc.find("Canvas/gameover"),this.win=cc.find("Canvas/win"),this.MenuUI=cc.find("Canvas/MenuUI"),this.TopUI=cc.find("Canvas/topUI"),this.DownUI=cc.find("Canvas/DownUI"),this.ms=cc.find("Canvas/DownUI/ms").getComponent(cc.Label),this.gametimer=cc.find("Canvas/topUI/timer").getComponent(cc.Label),this.Maxtimerlab=cc.find("Canvas/MenuUI/TopUI/MaxTimer").getComponent(cc.Label),this.timer=0,this.timer1=0,this.timer2=10,this.bossadd=!1,cc.sys.localStorage.getItem("MaxTimer")?this.MaxTimer=cc.sys.localStorage.getItem("MaxTimer"):(cc.sys.localStorage.setItem("MaxTimer",0),this.MaxTimer=cc.sys.localStorage.getItem("MaxTimer")),0==this.MaxTimer?this.Maxtimerlab.string="\u6700\u5feb\u65f6\u95f4\uff1a\u6682\u65e0":this.Maxtimerlab.string="\u6700\u5feb\u65f6\u95f4\uff1a"+Math.floor(this.MaxTimer/60)+"\u5206"+Math.floor(this.MaxTimer%60)+"\u79d2",this.touchspeed=1.25;this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this)},touchMove:function(t){G.gameover||(this.ball.x+t.getDelta().x*this.touchspeed>this.node.width/2-this.ball.width/2?this.ball.x=this.node.width/2-this.ball.width/2:this.ball.x+t.getDelta().x*this.touchspeed<-this.node.width/2+this.ball.width/2?this.ball.x=-this.node.width/2+this.ball.width/2:this.ball.x+=t.getDelta().x*this.touchspeed,this.ball.y+t.getDelta().y*this.touchspeed>this.node.height/2-this.ball.height/2?this.ball.y=this.node.height/2-this.ball.height/2:this.ball.y+t.getDelta().y*this.touchspeed<-this.node.height/2+this.ball.height/2?this.ball.y=-this.node.height/2+this.ball.height/2:this.ball.y+=t.getDelta().y*this.touchspeed)},addenemy:function(){var t=cc.instantiate(this.enemy);t.parent=this.enemynode;var e=2*(Math.random()-.5)*(this.node.height/2+120);if(Math.abs(e)<480)var i=Math.random()>.5?-this.node.width/2-40:this.node.width/2+40;else i=2*(Math.random()-.5)*this.node.width/2;t.setPosition(cc.v2(i,e))},addboss:function(){var t=cc.instantiate(this.boss);t.parent=this.bossnode,t.setPosition(cc.v2(0,-290))},update:function(t){G.gameover||(this.timer+=t,this.timer>=.5&&(this.timer=0,this.addenemy()),0==this.bossadd&&(this.timer2-=t,this.ms.string="Boss\u62b5\u8fbe\u65f6\u95f4:"+Math.floor(this.timer2),this.timer2<=0&&(this.ms.string="BOSS",this.bossadd=!0,this.addboss())),this.timer1+=t,this.gametimer.string="\u65f6\u95f4:"+Math.floor(this.timer1/60)+"\u5206"+Math.floor(this.timer1%60)+"\u79d2")},startgame:function(){var t=cc.callFunc(function(){this.MenuUI.active=!1},this),e=cc.sequence(cc.moveTo(.5,-700,0),t);this.MenuUI.runAction(e),this.TopUI.active=this.DownUI.active=!0;var i=cc.moveTo(.5,0,0);this.TopUI.runAction(i);var o=cc.moveTo(.5,0,0);this.DownUI.runAction(o),G.gameover=!1},restartgame:function(){cc.director.loadScene("helloworld")},gameover1:function(){this.gameovernode.active=!0,G.gameover=!0},win1:function(){this.win.active=!0,this.win.getChildByName("timer").getComponent(cc.Label).string="\u7528\u65f6\uff1a"+Math.floor(this.timer1/60)+"\u5206"+Math.floor(this.timer1%60)+"\u79d2",0==this.MaxTimer?(this.MaxTimer=this.timer1,cc.sys.localStorage.setItem("MaxTimer",this.MaxTimer)):this.timer1<this.MaxTimer&&(this.MaxTimer=this.timer1,cc.sys.localStorage.setItem("MaxTimer",this.MaxTimer)),G.gameover=!0}}),cc._RF.pop()},{}],player:[function(t,e,i){"use strict";cc._RF.push(e,"25476j6IfxF/olqytBl5+Ro","player"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bloodNum=100,this.blood=cc.find("Canvas/topUI/blood").getComponent(cc.ProgressBar),this.blood.progress=1,this.collisionBoss=!1,this.timer=0},Injured:function(){this.node.color=cc.Color.RED;var t=cc.tintTo(.3,255,255,255);this.node.runAction(t)},onCollisionEnter:function(t,e){"boss"==t.node.group&&(this.collisionBoss=!0,this.Injured(),this.bloodNum-=5)},onCollisionExit:function(t,e){"boss"==t.node.group&&(this.collisionBoss=!1)},update:function(t){G.gameover||this.die||(this.bloodNum<=0&&G.main.gameover1(),this.blood.progress=this.bloodNum/100,this.collisionBoss&&(this.timer+=t,this.timer>=.5&&(this.timer=0,this.bloodNum-=5,this.Injured(),cc.log("\u78b0\u5230\u654c\u4eba"))))}}),cc._RF.pop()},{}],test:[function(t,e,i){"use strict";cc._RF.push(e,"9b943n2A0dFeoVkADrAyeBZ","test"),cc.Class({extends:cc.Component,properties:{turret:cc.Prefab,weapon:cc.Prefab},onLoad:function(){this.timer=0},addturret:function(){cc.instantiate(this.turret).parent=this.node,this.node.getComponent("defense").changeturretangle()},addweapon:function(){cc.instantiate(this.weapon).parent=this.node,this.node.getComponent("defense").changeturretangle()},update:function(t){this.timer+=t,this.timer>.1&&(this.timer=0)}}),cc._RF.pop()},{}],turret:[function(t,e,i){"use strict";cc._RF.push(e,"143acgMRkFBEKNro9XlKtEQ","turret"),cc.Class({extends:cc.Component,properties:{bullet:cc.Prefab},onLoad:function(){this.timer=0,this.moveangle=!1},addbullet:function(t){var e=cc.instantiate(this.bullet);e.parent=cc.find("Canvas/bullet"),e.setPosition(cc.find("Canvas/bullet").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.node.children[0]))),e.getComponent("bullet").init(t)},changeangle:function(t){var e=cc.rotateTo(2,t);this.node.runAction(e)},update:function(t){if(!G.gameover&&(this.timer+=t,this.timer>.5)){this.timer=0;var e=this.node.parent.parent.convertToWorldSpaceAR(this.node.parent.getPosition()),i=this.node.convertToWorldSpaceAR(this.node.children[0]).sub(e).normalize();this.addbullet(i)}}}),cc._RF.pop()},{}]},{},["Weapon fragments","boss","bossbullet","bullet","defense","enemy","main","player","test","turret"]);