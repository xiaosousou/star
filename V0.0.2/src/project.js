window.__require=function t(e,i,o){function n(a,c){if(!i[a]){if(!e[a]){var h=a.split("/");if(h=h[h.length-1],!e[h]){var r="function"==typeof __require&&__require;if(!c&&r)return r(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+a+"'")}}var d=i[a]={exports:{}};e[a][0].call(d.exports,function(t){return n(e[a][1][t]||t)},d,d.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({Gravitation:[function(t,e,i){"use strict";cc._RF.push(e,"e4865xlOfVOtIwRWyb2weZg","Gravitation"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.changeturretangle()},changeturretangle:function(){},update:function(t){0!=G.gamestart&&(this.node.rotation>180&&(this.node.rotation=-180),this.node.rotation+=50*t)}}),cc._RF.pop()},{}],StartAnimFinished:[function(t,e,i){"use strict";cc._RF.push(e,"d2515uYx05E9omHrgmq0cV9","StartAnimFinished"),cc.Class({extends:cc.Component,properties:{},Finished:function(){this.node.active=!1}}),cc._RF.pop()},{}],"Weapon fragments":[function(t,e,i){"use strict";cc._RF.push(e,"2f093ZlTllLyrmfA4rApgll","Weapon fragments"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],bossbullet:[function(t,e,i){"use strict";cc._RF.push(e,"4b281hcHMtOR7P+eLVRR6u0","bossbullet"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.xl=cc.v2(Math.cos(t*Math.PI/180),Math.sin(t*Math.PI/180)),this.node.rotation=-Math.atan2(this.xl.y,this.xl.x)/Math.PI*180},onCollisionEnter:function(t,e){"player"==t.node.group&&(t.node.getComponent("player").bloodNum-=10,t.node.getComponent("player").Injured(),e.node.destroy())},update:function(t){G.gameover||(Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy(),this.node.x+=200*this.xl.x*t,this.node.y+=200*this.xl.y*t)}}),cc._RF.pop()},{}],boss:[function(t,e,i){"use strict";cc._RF.push(e,"9eadcrSqNdJt4wp2tzOLqJz","boss"),cc.Class({extends:cc.Component,properties:{bullet:cc.Prefab},onLoad:function(){this.anim=this.node.getComponent(cc.Animation),this.ball=cc.find("Canvas/ball"),this.bulletnode=cc.find("Canvas/bullet"),this.bloodbar=this.node.children[0],this.bloodbar.parent=cc.find("Canvas/DownUI/bossblood"),this.bloodbar.active=!0,this.bloodbarNum=this.bloodbar.getComponent(cc.ProgressBar),this.bloodbarNum.progress=1,this.bloodnum=50,this.die=!1,this.timer=0,this.bulletangle=0,this.timer1=0},shooting:function(){this.bulletangle>=360&&(this.bulletangle=0),this.bulletangle+=5*Math.random()+5;for(var t=0;t<360;t+=20){var e=cc.instantiate(this.bullet);e.parent=this.bulletnode,e.setPosition(this.bulletnode.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.getPosition()))),e.getComponent("bossbullet").init(t+this.bulletangle)}},shooting1:function(){var t=0;this.schedule(function(){t+=2,cc.log(t);for(var e=0;e<360;e+=20){var i=cc.instantiate(this.bullet);i.parent=this.bulletnode,i.setPosition(this.bulletnode.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.getPosition()))),i.getComponent("bossbullet").init(e+t)}},.1,4,.1)},Injured:function(){this.bloodnum--,this.node.color=cc.Color.RED;var t=cc.tintTo(.3,255,255,255);this.node.runAction(t)},die1:function(){G.main.win1()},update:function(t){if(!G.gameover&&!this.die){var e=this.ball.getPosition().sub(this.node.getPosition()).normalize();this.node.y+=20*e.y*t,this.node.x+=20*e.x*t,this.bloodbarNum.progress=this.bloodnum/50,this.bloodnum<=0&&(this.die=!0,this.anim.play("bossboom"),G.gameover=!0),this.timer+=t,this.bloodbarNum.progress>.5?this.timer>=1&&(this.timer=0,this.shooting()):this.timer>=2&&(this.timer=0,this.shooting1())}}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"dd16dBUolRLTabtba5ErYel","bullet"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.xl=t,this.node.rotation=-Math.atan2(t.y,t.x)/Math.PI*180},onCollisionEnter:function(t,e){"boss"==t.node.group&&0==t.tag&&(t.node.getComponent("boss").Injured(),e.node.destroy())},update:function(t){G.gameover||(Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy(),this.node.x+=500*this.xl.x*t,this.node.y+=500*this.xl.y*t)}}),cc._RF.pop()},{}],enemy:[function(t,e,i){"use strict";cc._RF.push(e,"355ecB2MhdG4ISSSuJC7l0a","enemy"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ball=cc.find("Canvas/ball"),this.anim=this.node.getComponent(cc.Animation),this.timer=0,this.die=!1},onCollisionEnter:function(t,e){"player"==t.node.group&&0==e.tag&&(t.node.getComponent("player").bloodNum-=5,t.node.getComponent("player").Injured(),this.die=!0,this.anim.play("enemyboom")),"bullet"==t.node.group&&0==e.tag&&(t.node.destroy(),this.die=!0,this.anim.play("enemyboom"))},die1:function(){this.node.destroy()},update:function(t){if(!G.gameover&&!this.die){this.timer+=t,this.timer>15&&this.node.destroy();var e=this.ball.getPosition().sub(this.node.getPosition()).normalize(),i=Math.atan2(e.y,e.x)/Math.PI*180*-1;this.node.rotation=i,this.node.y+=50*e.y*t,this.node.x+=50*e.x*t}}}),cc._RF.pop()},{}],main:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","main"),window.G={main:null,gamestart:!1,gameover:!0,score:0,wave:0},cc.Class({extends:cc.Component,properties:{Lead:cc.Node,LeadAnim:cc.Animation,SpaceCore:cc.Animation,Gravitation:cc.Animation,ShareS:[cc.Animation],SwopeToPlay:cc.Node,Wave:cc.Animation,GameTopUI:cc.Animation},onLoad:function(){cc.sys.localStorage.clear(),cc.director.getCollisionManager().enabled=!0,G.main=this,G.gameover=!0,G.score=0,G.wave=0,this.enemynode=cc.find("Canvas/enemys"),this.bossnode=cc.find("Canvas/boss"),this.StartUI=cc.find("Canvas/StartUI"),this.GameUI=cc.find("Canvas/GameUI"),this.timer=0,this.touchspeed=1.25;this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.LeadAnim.on("finished",this.LeadAnimonFinished,this)},touchMove:function(t){0!=G.gamestart&&(this.Lead.x+t.getDelta().x*this.touchspeed>this.node.width/2-this.Lead.width/2?this.Lead.x=this.node.width/2-this.Lead.width/2:this.Lead.x+t.getDelta().x*this.touchspeed<-this.node.width/2+this.Lead.width/2?this.Lead.x=-this.node.width/2+this.Lead.width/2:this.Lead.x+=t.getDelta().x*this.touchspeed,this.Lead.y+t.getDelta().y*this.touchspeed>this.node.height/2-this.Lead.height/2?this.Lead.y=this.node.height/2-this.Lead.height/2:this.Lead.y+t.getDelta().y*this.touchspeed<-this.node.height/2+this.Lead.height/2?this.Lead.y=-this.node.height/2+this.Lead.height/2:this.Lead.y+=t.getDelta().y*this.touchspeed)},touchStart:function(){if(0==G.gamestart){for(var t in this.SpaceCore.play(),this.Gravitation.play(),this.LeadAnim.play(),this.SwopeToPlay.active=!1,this.ShareS)this.ShareS[t].play();this.GameUI.active=!0,this.Wave.play(),this.GameTopUI.play(),G.gamestart=!0}},LeadAnimonFinished:function(){this.StartUI.active=!1},addenemy:function(){var t=cc.instantiate(this.enemy);t.parent=this.enemynode;var e=2*(Math.random()-.5)*(this.node.height/2+120);if(Math.abs(e)<480)var i=Math.random()>.5?-this.node.width/2-40:this.node.width/2+40;else i=2*(Math.random()-.5)*this.node.width/2;t.setPosition(cc.v2(i,e))},addboss:function(){var t=cc.instantiate(this.boss);t.parent=this.bossnode,t.setPosition(cc.v2(0,-290))},update:function(t){G.gamestart}}),cc._RF.pop()},{}],player:[function(t,e,i){"use strict";cc._RF.push(e,"25476j6IfxF/olqytBl5+Ro","player"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bloodNum=100,this.blood=cc.find("Canvas/topUI/blood").getComponent(cc.ProgressBar),this.blood.progress=1},update:function(t){0==G.gamestart||this.die||(this.bloodNum<=0&&G.main.gameover1(),this.blood.progress=this.bloodNum/100,this.collisionBoss&&(this.timer+=t,this.timer>=.5&&(this.timer=0,this.bloodNum-=5,this.Injured(),cc.log("\u78b0\u5230\u654c\u4eba"))))}}),cc._RF.pop()},{}],startmove:[function(t,e,i){"use strict";cc._RF.push(e,"04fd1h8gcFHRKp18D0Oe3vT","startmove"),cc.Class({extends:cc.Component,properties:{share:cc.Animation,like:cc.Animation,leadboard:cc.Animation,space:cc.Animation,swipe:cc.Node,gravitation:cc.Animation,lead:cc.Animation},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchMove,this)},touchMove:function(){this.share.play(),this.like.play(),this.leadboard.play(),this.space.play(),this.gravitation.play(),this.lead.play(),this.swipe.active=!1}}),cc._RF.pop()},{}],test:[function(t,e,i){"use strict";cc._RF.push(e,"9b943n2A0dFeoVkADrAyeBZ","test"),cc.Class({extends:cc.Component,properties:{turret:cc.Prefab,weapon:cc.Prefab},onLoad:function(){this.timer=0},addturret:function(){cc.instantiate(this.turret).parent=this.node,this.node.getComponent("defense").changeturretangle()},addweapon:function(){cc.instantiate(this.weapon).parent=this.node,this.node.getComponent("defense").changeturretangle()},update:function(t){this.timer+=t,this.timer>.1&&(this.timer=0)}}),cc._RF.pop()},{}],turret:[function(t,e,i){"use strict";cc._RF.push(e,"143acgMRkFBEKNro9XlKtEQ","turret"),cc.Class({extends:cc.Component,properties:{bullet:cc.Prefab},onLoad:function(){this.timer=0,this.moveangle=!1},addbullet:function(t){var e=cc.instantiate(this.bullet);e.parent=cc.find("Canvas/bullet"),e.setPosition(cc.find("Canvas/bullet").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.node.children[0]))),e.getComponent("bullet").init(t)},changeangle:function(t){var e=cc.rotateTo(2,t);this.node.runAction(e)},update:function(t){if(!G.gameover&&(this.timer+=t,this.timer>.5)){this.timer=0;var e=this.node.parent.parent.convertToWorldSpaceAR(this.node.parent.getPosition()),i=this.node.convertToWorldSpaceAR(this.node.children[0]).sub(e).normalize();this.addbullet(i)}}}),cc._RF.pop()},{}]},{},["Gravitation","StartAnimFinished","Weapon fragments","boss","bossbullet","bullet","enemy","main","player","test","startmove","turret"]);